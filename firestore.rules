service cloud.firestore {

  match /databases/{database}/documents {

     function isUserWithId(userId) {
        return request.auth.uid == userId;
     }

     match /courses/{courseId} {
     	allow read: if true;

      match /lessons/{lessonId} {
       allow read: if true;
      }

     }

     match /userPurchases/{userId} {
       allow read: if isUserWithId(userId);

       match /coursesOwned/{courseId} {
        allow read: if isUserWithId(userId);
       }

     }

  }

}
